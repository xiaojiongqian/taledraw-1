# Firebase Functions éƒ¨ç½²ç­–ç•¥

## ğŸ¯ å›¢é˜Ÿåä½œéƒ¨ç½²è§„åˆ™

### å‡½æ•°ç»´æŠ¤è´£ä»»åˆ’åˆ†

#### ä½ ç»´æŠ¤çš„å‡½æ•° (Your Functions)
- `generateTaleStream` - æ•…äº‹ç”Ÿæˆæµ
- `getTaleData` - è·å–æ•…äº‹æ•°æ®
- `generateImage` - å›¾åƒç”Ÿæˆï¼ˆImagen 3ï¼‰
- `generateImageV4` - å›¾åƒç”Ÿæˆï¼ˆImagen 4ï¼‰
- `healthCheck` - å¥åº·æ£€æŸ¥

#### å…¶ä»–äººç»´æŠ¤çš„å‡½æ•° (Others' Functions)
- `stripeWebhook` - Stripeæ”¯ä»˜å›è°ƒ
- `createCheckoutSession` - åˆ›å»ºç»“è´¦ä¼šè¯
- `createCheckoutSessionHttp` - HTTPç»“è´¦ä¼šè¯

#### å¾…åˆ é™¤çš„å‡½æ•° (To Be Deleted)
- `extractCharacter` - è§’è‰²æå–ï¼ˆå·²å¼ƒç”¨ï¼‰
- `generateImageBatch` - æ‰¹é‡å›¾åƒç”Ÿæˆï¼ˆå·²å¼ƒç”¨ï¼‰
- `generateImageBatchV4` - æ‰¹é‡å›¾åƒç”ŸæˆV4ï¼ˆå·²å¼ƒç”¨ï¼‰

## ğŸš€ éƒ¨ç½²å‘½ä»¤

### å®‰å…¨éƒ¨ç½²ï¼ˆæ¨èï¼‰
```bash
# åªéƒ¨ç½²ä½ ç»´æŠ¤çš„å‡½æ•°
npm run deploy:my-functions

# åˆ†æ¨¡å—éƒ¨ç½²
npm run deploy:core      # æ ¸å¿ƒåŠŸèƒ½
npm run deploy:image     # å›¾åƒç”Ÿæˆ
npm run deploy:stream    # æµå¼ç”Ÿæˆ
npm run deploy:health    # å¥åº·æ£€æŸ¥
```

### å±é™©æ“ä½œ
```bash
# å…¨é‡éƒ¨ç½²ï¼ˆå¯èƒ½å½±å“ä»–äººå‡½æ•°ï¼‰
npm run deploy
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ°¸è¿œä¸è¦ä½¿ç”¨** `firebase deploy --only functions` é™¤éä½ ç¡®å®šè¦éƒ¨ç½²æ‰€æœ‰å‡½æ•°
2. **åˆ é™¤å‡½æ•°æ—¶**ï¼Œå…ˆåœ¨å›¢é˜Ÿç¾¤é‡Œç¡®è®¤
3. **éƒ¨ç½²å‰**ï¼Œç¡®ä¿è¿è¡Œäº† `npm run lint`
4. **ç´§æ€¥æƒ…å†µ**ï¼Œå¯ä»¥ä½¿ç”¨ Firebase Console æ‰‹åŠ¨æ“ä½œ

## ğŸ”„ åˆ é™¤åºŸå¼ƒå‡½æ•°

å¦‚æœéœ€è¦åˆ é™¤åºŸå¼ƒçš„å‡½æ•°ï¼Œä½¿ç”¨ä»¥ä¸‹æ­¥éª¤ï¼š

1. åœ¨ Firebase Console ä¸­æ‰‹åŠ¨åˆ é™¤
2. æˆ–è€…è”ç³»é¡¹ç›®ç®¡ç†å‘˜
3. æˆ–è€…åœ¨å›¢é˜Ÿä¼šè®®ä¸­ç»Ÿä¸€å¤„ç†

## ğŸ“‹ æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰è¯·ç¡®è®¤ï¼š
- [ ] ä»£ç é€šè¿‡lintæ£€æŸ¥
- [ ] åªéƒ¨ç½²ä½ ç»´æŠ¤çš„å‡½æ•°
- [ ] æ²¡æœ‰è¯¯åˆ é™¤ä»–äººçš„å‡½æ•°
- [ ] æµ‹è¯•é€šè¿‡
